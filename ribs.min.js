(function(){var t={}.hasOwnProperty,e=function(e,i){function s(){this.constructor=e}for(var o in i)t.call(i,o)&&(e[o]=i[o]);return s.prototype=i.prototype,e.prototype=new s,e.__super__=i.prototype,e},i=function(t,e){return function(){return t.apply(e,arguments)}};(function(t){var s;return s="undefined"!=typeof window&&null!==window?window:module.exports,s.Ribs={},Ribs.List=function(i){function s(t){var e,i,o,n,r,l,c;for(this.sortArrows={},this.sortArrows[-1]="↓",this.sortArrows[1]="↑",null==(n=this.itemView)&&(this.itemView=Ribs.ListItem),null==(r=this.actionView)&&(this.actionView=Ribs.BatchAction),this.events=_.extend({},this.events,this._ribsEvents),this.sortingDirection={},this.sortingBy="id",l=this._ribsOptions,i=0,o=l.length;o>i;i++)e=l[i],null!=t[e]&&(this[e]=t[e]);null==(c=Ribs.keyboardManager)&&(Ribs.keyboardManager=new Ribs.KeyboardManager),this.keyboardManager=Ribs.keyboardManager,s.__super__.constructor.call(this,t),this.initializeHotKeys(),this.$el.addClass("ribs")}return e(s,i),s.prototype.tagName="div",s.prototype.itemName="item",s.prototype._ribsEvents={keypress:"keypressed",focusin:"focusin",focusout:"focusout","click .header .toggle input":"toggleSelected","click .maximize .minimize":"toggleVisibility","click [data-sort-by]":"sortByField"},s.prototype._ribsOptions=["displayAttributes","actions","itemView"],s.prototype.jumpSelector=".list li:first",s.prototype.focussed=!1,s.prototype.selectedByDefault=!1,s.prototype.stopPropogation=function(t){return t.preventDefault()},s.prototype.renderOrder=["Title","Actions","Header","List","Footer"],s.prototype.setElement=function(t,e){return s.__super__.setElement.call(this,t,e),this.build()},s.prototype.remove=function(){return this.removeAllSubviews(),s.__super__.remove.call(this)},s.prototype.removeAllSubviews=function(){return this.removeSubviews("list"),this.removeSubviews("action")},s.prototype.removeSubviews=function(t){var e,i,s,o;if(e=this.subviews(t))for(s=0,o=e.length;o>s;s++)i=e[s],i.remove();return this["_"+t+"Subviews"]=[]},s.prototype.subviews=function(t){return this["_"+t+"Subviews"]},s.prototype.build=function(){var t,e,i,s,o;for(this.removeAllSubviews(),this.$el.empty(),o=this.renderOrder,i=0,s=o.length;s>i;i++)e=o[i],t=e.replace(/^./,"$"+e[0].toLowerCase()),this["suppress"+e]||null!=this[t]||(this[t]=this["initialize"+e]()),this.$el.append(this[t]);return null!=this.collection?this.setCollection(this.collection):void 0},s.prototype.render=function(){var t,e,i,s;for(s=this.renderOrder,e=0,i=s.length;i>e;e++)t=s[e],this["suppress"+t]||this["render"+t]();return this},s.prototype.setCollection=function(t){var e,i,s,o,n;for(this.collection=t,this.stopListening(this.collection),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"sort reset",this.addAllItems),n=["Actions","Footer","Header"],s=0,o=n.length;o>s;s++)i=n[s],e=this["render"+i],!this["suppress"+i]&&_.isFunction(e)&&this.listenTo(this.collection,"selected deselected add remove",e);return this.listenTo(this.collection,"reset",this.render),this.addAllItems(),this.suppressHeader?void 0:this.updateHeaderArrows(this.sortingBy)},s.prototype.getSelected=function(){var e=this;return null==this.$list?[]:this.$list.find(".item.selected").map(function(i,s){return e.collection.get(t(s).data("cid"))})},s.prototype.getDeselected=function(){var e=this;return null==this.$list?[]:this.$list.find(".item:not(.selected)").map(function(i,s){return e.collection.get(t(s).data("cid"))})},s.prototype.getNumSelected=function(){return null==this.$list?0:this.$list.find(".item.selected").size()},s.prototype.getNumDeselected=function(){return null==this.$list?0:this.$list.find(".item:not(.selected)").size()},s.prototype.getNumTotal=function(){return null==this.collection?0:this.collection.length},s.prototype.toggleFocussedSelected=function(){return this.suppressToggle?void 0:this.$(".item:focus").trigger("toggle")},s.prototype.toggleSelected=function(){var t,e;return this.selectedByDefault===!0?(this.$list.find(".item.selected").trigger("deselectitem",{silent:!0}),this.selectedByDefault=!1,null!=(t=this.collection)?t.trigger("deselected"):void 0):(this.$list.find(".item:not(.selected)").trigger("selectitem",{silent:!0}),this.selectedByDefault=!0,null!=(e=this.collection)?e.trigger("selected"):void 0)},s.prototype.invertSelected=function(){var t,e;return e=this.$list.find(":not(.item.selected)"),t=this.$list.find(".item.selected"),e.trigger("select"),t.trigger("deselectitem")},s.prototype.toggleVisibility=function(){return this.$header.find(".maximize, .minimize").toggle(),this.$el.toggleClass("minimized",100)},s.prototype.sortByField=function(e){var i,s,o;return s=t(e.target).attr("data-sort-by"),null!=s&&null!=this.collection?(o=this.sortingBy,this.sortingBy=s,s===o&&s in this.sortingDirection?this.sortingDirection[s]*=-1:this.sortingDirection[s]=1,i=this.sortingDirection[s],this.sortCollection(s,i),this.updateHeaderArrows(s,o)):void 0},s.prototype.sortCollection=function(t,e){var i=this;return this.collection.remoteSort?this.collection.trigger("remoteSort",t,e):(this.collection.comparator=function(s,o){var n,r,l,c;return n=s.get(t),l=i.displayAttributeMap[t],_.isFunction(l.map)&&(n=l.map.call(i,n,s)),r=o.get(t),c=i.displayAttributeMap[t],_.isFunction(c.map)&&(r=c.map.call(i,r,o)),null!=(null!=n?n.toLowerCase:void 0)&&(n=n.toLowerCase()),null!=(null!=r?r.toLowerCase:void 0)&&(r=r.toLowerCase()),n===r?0:n>r||null==r?1*e:r>n||null==n?-1*e:void 0},this.collection.sort())},s.prototype.updateHeaderArrows=function(e,i){var s,o,n,r;return n=RegExp(" ("+_.values(this.sortArrows).join("|")+")$|$"),s=null!=(r=this.sortingDirection[e])?r:1,null!=i&&this.$header.find("[data-sort-by='"+i+"'] .arrow").remove(),o=t("<span />",{"class":"arrow",text:this.sortArrows[s]}),this.$header.find("[data-sort-by='"+e+"']").append(o)},s.prototype.initializeHotKeys=function(){var e,i,s,o,n,r=this;for(this.keyboardNamespace=this.keyboardManager.registerView(this,this.plural()),null!=this.jumpkey&&this.keyboardManager.registerJumpKey({label:this.plural(),jumpkey:this.jumpkey,context:this,callback:function(){return r.$(r.jumpSelector).focus()},precondition:function(){return r.$el.is(":visible")}}),i=[{hotkey:"j",label:"Focus next item",callback:function(){return t(document.activeElement).nextAll(".item:visible:not(.disabled):first").focus()}},{hotkey:"J",label:"Focus last item",callback:function(){return r.$list.find(".item:last").focus()}},{hotkey:"k",label:"Focus previous item",callback:function(){return t(document.activeElement).prevAll(".item:visible:not(.disabled):first").focus()}},{hotkey:"K",label:"Focus first item",callback:function(){return r.$list.find(".item:first").focus()}},{hotkey:"x",label:"Select/deselect item",callback:function(){return r.toggleFocussedSelected()}},{hotkey:"X",label:"Select/deselect all",callback:function(){return r.toggleSelected()}},{hotkey:"_",label:"Expand/collapse list",callback:function(){return r.toggleVisibility()}},{hotkey:"R",label:"Refresh items",callback:function(){return r.refresh()}}],n=[],s=0,o=i.length;o>s;s++)e=i[s],e.namespace=this.keyboardNamespace,n.push(this.keyboardManager.registerHotKey(e));return n},s.prototype.keypressed=function(t){return this.trigger("keypressed",t),this.keyboardManager.handleKeypress(t,this.keyboardNamespace)},s.prototype.refresh=function(){var t=this;return null!=this.collection.url?(this.trigger("refresh"),this.collection.fetch({success:function(){var e;return null!=(e=t.$list.find(".item:first"))?e.focus():void 0}})):void 0},s.prototype.focusin=function(){var t;return this.focussed||(this.focussed=!0),this.$el.addClass("focussed"),null!=(t=this.collection)?t.trigger("focusin"):void 0},s.prototype.focusout=function(){var t=this;return this.focussed?setTimeout(function(){var e;return 0===t.$(document.activeElement).length&&t.$el.removeClass("focussed"),t.focussed=!1,null!=(e=t.collection)?e.trigger("focusout"):void 0},10):void 0},s.prototype.plural=function(){var t;return null!=(t=this.itemNamePlural)?t:this.itemName+"s"},s.prototype.addItem=function(t){var e,i,s,o;return i=Backbone.View.prototype.isPrototypeOf(this.itemView.prototype)?this.itemView:this.itemView(t),s=new i({model:t,view:this}),e=this.collection.indexOf(t),0===(o=this.$list.children().size())||o===e?this.$list.append(s.el):this.$list.children(":nth-child("+(e+1)+")").before(s.el),this.$el.is(":visible")&&s.render(),this.subviews("list").push(s),this.selectedByDefault?s.select():void 0},s.prototype.addAllItems=function(){var t;return this.removeSubviews("list"),this.$list.empty(),null!=(t=this.collection)?t.each(this.addItem,this):void 0},s.prototype.get=function(t){return _.find(this.subviews("list"),function(e){return e.model.id===t})},s.prototype.getByCid=function(t){return _.find(this.subviews("list"),function(e){return e.model.cid===t})},s.prototype.initializeTitle=function(){var e,i,s;return i=null!=(s=this.title)?s:this.plural(),_.isFunction(i)&&(i=i.call(this)),e=t("<h1 />",{"class":"title",text:i})},s.prototype.renderTitle=function(){},s.prototype.initializeActions=function(){var e,i=this;return this.batchActions=[],this.inlineActions=[],this.allActions=[],this.removeSubviews("action"),e=t("<ul/>",{"class":"actions"}),_.each(this.actions,function(t){var s,o;return s=new Ribs.Action(t,{view:i}),i.allActions.push(s),t.inline&&i.inlineActions.push(s),t.batch!==!1?(i.batchActions.push(s),o=new i.actionView({model:s}),i.subviews("action").push(o),e.append(o.el),o.render()):void 0}),e},s.prototype.renderActions=function(){var t,e,i,s,o;for(s=this.subviews("action"),o=[],e=0,i=s.length;i>e;e++)t=s[e],o.push(t.render());return o},s.prototype.initializeList=function(){var e;return e=t("<ul/>",{"class":"list"})},s.prototype.renderList=function(){var t,e,i,s,o;for(s=this.subviews("list"),o=[],e=0,i=s.length;i>e;e++)t=s[e],t.undelegateEvents(),t.render(),o.push(t.delegateEvents());return o},s.prototype.initializeHeader=function(){var e,i,s,o=this;return e=t("<div />",{"class":"header"}),this.suppressToggle||(s=t("<input />",{type:"checkbox",checked:this.selectedByDefault}),e.append(t("<div />",{"class":"toggle",html:s}))),null==this.displayAttributes&&(i=_.map(this.collection.first().toJSON(),function(t,e){return{field:e}})),this.displayAttributeMap={},_.each(this.displayAttributes,function(i){var s,n,r,l,c;return o.displayAttributeMap[i.field]=i,r=null!=(l=i.label)?l:i.field,n=null!=(c=i["class"])?c:i.field,s=t("<div/>",{"class":n,"data-sort-by":i.sortField||i.field}),s.append(r),e.append(s)}),e},s.prototype.renderHeader=function(){var t,e,i,s,o;return s=this.getNumSelected(),i=this.getNumTotal(),s>=i&&(this.selectedByDefault=!0),0===s&&(this.selectedByDefault=!1),t=0!==s,e=t&&i>s,o=e?.5:1,this.$header.find(".toggle input").prop("checked",t).css("opacity",o)},s.prototype.initializeFooter=function(){var e;return e=t("<div/>",{"class":"footer"})},s.prototype.renderFooter=function(){var t,e;return t=1!==this.getNumTotal(),e=t?this.plural():this.itemName,this.$footer.text(""+this.getNumSelected()+" / "+this.getNumTotal()+" "+e+" selected")},s}(Backbone.View),Ribs.ListItem=function(i){function s(t){var e,i,o,n,r,l,c,a,h,u,p;for(this.events||(this.events={}),_.extend(this.events,this._ribsEvents),null==(a=this.itemCellView)&&(this.itemCellView=Ribs.ListItemCell),null==(h=this.actionView)&&(this.actionView=Ribs.InlineAction),this.view=null!=t?t.view:void 0,this.listItemCells=[],u=this.view.displayAttributes,l=0,c=u.length;c>l;l++)i=u[l],i=_.clone(i),i.view=this,i.model=t.model,r=new this.itemCellView(i),this.listItemCells.push(r);this.inlineActions=[],p=this.view.inlineActions;for(n in p)e=p[n],(null==e.filter||e.filter(this.model)!==!1)&&(o=new this.actionView({model:e,listItem:this}),this.inlineActions.push(o));s.__super__.constructor.call(this,t),null!=this.model&&(this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"remove",this.remove))}return e(s,i),s.prototype.tagName="li",s.prototype.className="item",s.prototype.attributes={tabindex:0},s.prototype._ribsEvents={click:"toggle",toggle:"toggle",selectitem:"select",deselectitem:"deselect","click a":"stopPropogation"},s.prototype.render=function(){var e,i,s,o,n,r,l,c,a,h,u;if(this.$el.empty(),this.model){for(this.$el.data("cid",this.model.cid),this.view.suppressToggle||(o=t("<input/>",{type:"checkbox",tabindex:-1}),this.$el.is(".selected")&&t(o).prop("checked",!0),i=t("<div/>",{"class":"toggle"}),i.append(o),this.$el.append(i)),h=this.listItemCells,r=0,c=h.length;c>r;r++)e=h[r],e.undelegateEvents(),this.$el.append(e.el),e.render(),e.delegateEvents();for(n=t("<ul/>",{"class":"actions"}),u=this.inlineActions,l=0,a=u.length;a>l;l++)s=u[l],s.undelegateEvents(),t(n).append(s.el),s.render(),s.delegateEvents();return this.$el.append(n),this}},s.prototype.toggle=function(){return this.$el.is(".disabled")?void 0:this.$el.is(".selected")?this.deselect():this.select()},s.prototype.stopPropogation=function(t){return t.stopImmediatePropagation()},s.prototype.select=function(t,e){return null==e&&(e={}),this.view.suppressToggle?void 0:(this.$el.addClass("selected"),this.$("input:checkbox").prop("checked",!0),e.silent?void 0:this.model.trigger("selected"))},s.prototype.deselect=function(t,e){return null==e&&(e={}),this.view.suppressToggle?void 0:(this.$el.removeClass("selected"),this.$("input:checkbox").prop("checked",!1),e.silent?void 0:this.model.trigger("deselected"))},s.prototype.enable=function(){return this.$el.removeClass("disabled"),this.$("input:checkbox").prop("disabled",!1),this.$el.prop("tabindex",0),this.model.trigger("enabled")},s.prototype.disable=function(){return this.$el.addClass("disabled"),this.$("input:checkbox").prop("disabled",!0),this.$el.prop("tabindex",-1),this.model.trigger("disabled")},s.prototype.remove=function(){var t,e,i,o,n,r,l,c;for(this.deselect(),l=this.inlineActions,i=0,n=l.length;n>i;i++)t=l[i],t.remove();for(c=this.listItemCells,o=0,r=c.length;r>o;o++)e=c[o],e.remove();return s.__super__.remove.call(this)},s}(Backbone.View),Ribs.ListItemCell=function(i){function s(t){var e;this.events||(this.events={}),_.extend(this.events,this._ribsEvents),s.__super__.constructor.call(this,t),this.$el.addClass(null!=(e=this.options["class"])?e:this.options.field)}return e(s,i),s.prototype.tagName="div",s.prototype.className="cell",s.prototype._ribsEvents={"click .edit":"edit","click .editableField":"stopPropagation","keypress .editableField":"handleKeypress","blur .editableField":"saveEditedField"},s.prototype.renderableValue=function(t){var e;return e=this.model.get(this.options.field),!t&&_.isFunction(this.options.map)&&(e=this.options.map.call(this.options.view.view,e,this.model)),e},s.prototype.render=function(){var e,i,s,o;return this.$el.empty(),this.options.escape===!1?this.$el.html(this.renderableValue()):this.$el.text(this.renderableValue()),this.options.editable===!0&&(i=null!=(s=this.options.label)?s:this.options.field,e=t("<span/>",{"class":"edit button inline",title:"Edit "+i,text:"✎"}),void 0===(o=this.model.get(this.options.field))||null===o||""===o?t(e).addClass("show"):t(e).removeClass("show"),this.$el.append(e)),this},s.prototype.edit=function(){var e,i,s,o,n,r,l,c,a;if(this.options.editable===!0){if(n=this.model.get(this.options.field),_.isFunction(this.options.edit))e=this.options.edit.call(this,n,this.model);else if(_.isArray(this.options.edit))for(e=t("<select/>"),c=this.options.edit,r=0,l=c.length;l>r;r++)s=c[r],o=t("<option/>",{value:s,text:s,selected:s===n}),e.append(o);else if(_.isObject(this.options.edit)){e=t("<select/>"),a=this.options.edit;for(i in a)s=a[i],o=t("<option/>",{value:i,text:s,selected:i===n}),e.append(o)}else e=t("<input/>",{type:"text",value:n});(_.isElement(e)||e instanceof jQuery)&&(t(e).addClass("editableField"),this.$el.html(e),t(e).focus())}return!1},s.prototype.stopPropagation=function(){return!1},s.prototype.saveEditedField=function(){var t,e,i,s=this;if(e=this.$(".editableField"),_.isFunction(this.options.save))return this.options.save.call(this,e,this.model);i=e.val(),t={},t[this.options.field]=i;try{return this.model.save(t,{quiet:!0,success:function(){return s.render()},error:function(){return s.render()}})}catch(o){return this.render()}},s.prototype.handleKeypress=function(t){return 13===t.which?(this.saveEditedField(),!1):void 0},s}(Backbone.View),Ribs.Action=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.defaults={min:1,max:-1,arity:null,check:null},i.prototype.initialize=function(t,e){var i=this;return this.ribs=e.view,this.has("hotkey")?this.ribs.keyboardManager.registerHotKey({hotkey:this.get("hotkey"),label:this.get("label"),namespace:this.ribs.keyboardNamespace,context:this,precondition:this.allowed,callback:function(){return i.activate()}}):void 0},i.prototype.allowed=function(t){var e,i,s,o,n;return null==t&&(t=this.getSelected()),s=t.length,i=!1,null!=this.get("arity")?(e=this.get("arity"),o=e===s,n=-1===e,i=o||n):(o=-1===this.get("min")||s>=this.get("min"),n=-1===this.get("max")||this.get("max")>=s,i=o&&n),i&&null!=this.get("check")&&(i=this.get("check").call(this.ribs,t)),i},i.prototype.activate=function(t,e){return null==t&&(t=this.getSelected()),this.get("activate").call(this.ribs,t,e)},i.prototype.getSelected=function(){return this.ribs.getSelected()},i}(Backbone.Model),Ribs.BatchAction=function(i){function s(){return s.__super__.constructor.apply(this,arguments)}return e(s,i),s.prototype.tagName="li",s.prototype.className="action",s.prototype.events={click:"activateIfAllowed",keypress:"keypressed"},s.prototype.render=function(){var e,i;return i=this.label(),e=t("<div/>",{"class":"button",title:i,html:i}),this.$el.html(e),this.checkRequirements(),this},s.prototype.label=function(){var t,e;return t=null!=(e=this.model.get("batchLabel"))?e:this.model.get("label"),this.model.has("hotkey")&&(t=this.constructor.highlightHotkey(t,this.model.get("hotkey"))),t},s.prototype.getSelected=function(){return this.model.getSelected()},s.prototype.getListItem=function(){},s.prototype.checkRequirements=function(){return this.setEnabled(this.model.allowed(this.getSelected()))},s.prototype.setEnabled=function(t){var e;return this.$el.toggleClass("disabled",!t),e=t?0:-1,this.$(".button").prop("tabindex",e)},s.prototype.activateIfAllowed=function(){return this.$el.is(".disabled")||this.model.activate(this.getSelected(),this.getListItem()),!1},s.prototype.activate=function(){return this.model.activate(this.getSelected(),this.getListItem()),!1},s.prototype.keypressed=function(t){return 13===t.which?(this.activate(),!1):void 0},s.highlightHotkey=function(t,e){var i,s;return s=_.template("<span class='hotkey'><strong><%= hotkey %></strong></span>"),i=t.replace(e,s({hotkey:e})),i===t&&(i=""+t+" "+s({hotkey:"["+e+"]"})),i},s}(Backbone.View),Ribs.InlineAction=function(t){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.label=function(){var t,e;return t=null!=(e=this.model.get("inlineLabel"))?e:this.model.get("label"),_.isFunction(t)&&(t=t.call(this.model,this.options.listItem.model)),t},i.prototype.getSelected=function(){return[this.options.listItem.model]},i.prototype.getListItem=function(){return this.options.listItem},i}(Ribs.BatchAction),Ribs.KeyboardManager=function(){function e(e){this.handleKeypress=i(this.handleKeypress,this),this.options=_.extend(this.options,e),this.registerHotKey({hotkey:"?",callback:this.showKeyboardBindings,context:this,label:"Show hotkeys"}),t(window).on("keypress",this.handleKeypress)}return e.prototype.boundCharCodes={},e.prototype.registeredViews={global:{bindings:[],tree:{},label:"Global",context:window}},e.prototype.options={jumpPrefixKey:"g",jumpTime:1e3,enableKeyboardShortcuts:!0},e.prototype.registerView=function(t,e){var i;return i=_.uniqueId("view"),this.registeredViews[i]={label:e,context:t,tree:{},bindings:[]},i},e.prototype.registerHotKey=function(t){var e,i,o,n,r,l,c,a,h,u;for(null==(c=t.charCodes)&&(t.charCodes=function(){var e,i,s,n;for(s=t.hotkey.split(""),n=[],e=0,i=s.length;i>e;e++)o=s[e],n.push(o.charCodeAt(0));return n}()),n=null!=(a=t.namespace)?a:t.namespace="global",s=this.registeredViews[n].tree,h=t.charCodes,i=r=0,l=h.length;l>r;i=++r)e=h[i],null==(u=s[e])&&(s[e]={bindings:[],upcoming:0}),i===t.charCodes.length-1?s[e].bindings.push(t):s[e].upcoming+=1,s=s[e];return this.registeredViews[n].bindings.push(t),n},e.prototype.registerJumpKey=function(t){return t.label="Go to "+t.label,t.hotkey=this.options.jumpPrefixKey+t.jumpkey,this.registerHotKey(t)},e.prototype.handleKeypress=function(e,i){var s,o;return null==i&&(i="global"),this.options.enableKeyboardShortcuts&&!t(document.activeElement).is(":input")?(s=null!=(o=this.currentContext)?o:this.registeredViews[i].tree,null!=s?this.execute(s,e.which):void 0):void 0},e.prototype.execute=function(t,e){var i,s,o,n,r,l,c=this;if(this.timeout&&clearTimeout(this.timeout),delete this.currentContext,e in t){if(t=t[e],0===t.upcoming)for(r=t.bindings,o=0,n=r.length;n>o;o++)i=r[o],s=null!=(l=i.context)?l:this.registeredViews[i.namespace].context,(!i.precondition||i.precondition.call(s))&&i.callback.call(s);else this.currentContext=t,this.timeout=setTimeout(function(){return c.execute(t)},this.options.jumpTime);return!1}},e.prototype.showKeyboardBindings=function(){var e,i;return null!=(i=this.constructor.view)&&i.$el.remove(),e=this.constructor.view=new Ribs.KeyboardHelpView({views:this.registeredViews,hotkeys:this.boundCharCodes}),e.render(),t("body").append(e.el)},e}(),Ribs.KeyboardHelpView=function(s){function o(){return this.handleKeyup=i(this.handleKeyup,this),o.__super__.constructor.apply(this,arguments)}return e(o,s),o.prototype.className="ribs-keyboard-shortcuts-overlay",o.prototype.events={click:"remove"},o.prototype.initialize=function(){return t(window).on("keyup",this.handleKeyup)},o.prototype.remove=function(){return t(window).off("keyup",this.handleKeyup),o.__super__.remove.call(this,arguments)},o.prototype.handleKeyup=function(t){return 27===t.which&&this.remove(),!1},o.prototype.render=function(){var e,i,s,o,n,r,l,c,a,h,u;this.$el.empty(),a=this.options.views,u=[];for(o in a)if(r=a[o],t(r.el).is(":hidden"))u.push(void 0);else{for(i=t("<h1/>",{text:r.label}),n=t("<ul/>"),h=r.bindings,l=0,c=h.length;c>l;l++)e=h[l],s=t("<li/>",{"class":"hotkey"}),s.append(t("<span/>",{"class":"key",text:e.hotkey})),s.append(t("<span/>",{"class":"action",text:e.label})),n.append(s);u.push(this.$el.append(i,n))}return u},o}(Backbone.View)})(jQuery)}).call(this);